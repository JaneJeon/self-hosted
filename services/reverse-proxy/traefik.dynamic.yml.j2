http:
  middlewares:
    gzip:
      compress: {}
    no-www: # stripping https://www.blah -> https://blah
      redirectRegex:
        regex: ^https://(?:www\.)?(.+)
        replacement: https://${1}
        permanent: true
    # Allow connections only from Cloudflare, so people can't just bypass it.
    # https://doc.traefik.io/traefik/middlewares/http/ipwhitelist/#ipwhitelist
    whitelist-cloudflare:
      ipWhiteList:
        sourceRange: {{ cloudflare_ips | tojson }}
    sso-proxy:
      forwardAuth:
        address: http://authelia:9091/api/verify?rd=https://auth.janejeon.com
        trustForwardHeader: true
        authResponseHeaders:
          - Remote-User
          - Remote-Groups
          - Remote-Name
          - Remote-Email
